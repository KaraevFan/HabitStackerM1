# Journey Screen Redesign Spec

**Date:** Feb 5, 2026  
**Screen:** `/journey` (Your Journey tab)  
**Priority:** High — this is the primary reflection surface

---

## Problem Summary

The current Journey screen has several issues:

1. **State confusion** — Binary "Done/Missed" doesn't capture the full picture. We need to distinguish between:
   - Days where the user completed the habit
   - Days where the user intentionally skipped (acknowledged but couldn't do it)
   - Days where the user recovered after a miss
   - Days where the user didn't engage at all (silent failure)

2. **Identity crisis** — The screen has "Mark today's rep" CTA but this is supposed to be a *reflective* screen ("How am I doing?"), not an action screen ("What should I do?"). Remove the primary CTA.

3. **Generic calendar** — Looks like Google Calendar, not a habit journey. Needs more personality and connection to the user's data.

4. **Confusing "Recent Days"** — Shows duplicate "Today" entries and doesn't connect visually to the calendar above.

---

## New State Model

Replace the binary Done/Missed with a four-state model:

| State | DB Value | Visual Treatment | Description |
|-------|----------|------------------|-------------|
| **Done** | `done` | Filled teal circle | Completed the habit |
| **Recovered** | `recovered` | Outlined teal circle with ↻ icon | Came back after a miss — this is a WIN |
| **Skipped** | `skipped` | Outlined amber circle | User said "I can't today" — acknowledged, not abandoned |
| **Missed** | `missed` | Small filled muted-red dot | Day passed with no engagement (silent failure) |
| **Future** | n/a | No indicator | Days that haven't happened yet |
| **Pre-habit** | n/a | No indicator | Days before the habit started |

### State Transition Logic

- When user taps "I can't today" → status = `skipped`
- When user completes habit after a `missed` or `skipped` day → status = `recovered`
- When user completes habit normally → status = `done`
- When day ends with no user action → status = `missed`

### Data Model Update

```typescript
type DayStatus = 'done' | 'recovered' | 'skipped' | 'missed';

interface DayLog {
  date: string; // ISO date string
  status: DayStatus;
  note?: string; // User reflection
  difficulty?: number; // 1-5 scale
  time?: string; // Time logged (HH:MM)
  value?: number | string; // For habits that track values (e.g., yen spent)
}
```

---

## Screen Architecture

### Remove
- "Mark today's rep" button (move to Today screen only)
- "I did it earlier" / "I can't today" links (move to Today screen)
- Duplicate "Today" entries in Recent Days

### Add/Modify

#### 1. Narrative Header (Top Section)

Replace the habit card + CTA with a momentum summary:

```
┌─────────────────────────────────────────────┐
│  ┌──────┐                                   │
│  │ 80%  │  You've shown up 4 of 5 days      │
│  │ ring │  since starting.                  │
│  └──────┘  That's better than most Week 1s. │
└─────────────────────────────────────────────┘
```

- **Momentum ring**: SVG circle showing "showing up %" 
- **"Showing up" = done + recovered + skipped** (any engagement counts)
- **Insight text**: Contextual encouragement in italicized teal

#### 2. Calendar (Middle Section)

Keep the calendar but enhance it:

- Use the four-state color system for day indicators
- Add **note indicator** (small amber dot in corner) for days with reflections
- Tapping a day opens the **Day Detail Sheet**
- Today gets a teal border (not filled background)
- Selected day gets light teal background (`#E8F2EF`)

**Legend**: Show all four states below the calendar
```
● Done   ○ Recovered   ○ Skipped   ● Missed
  teal     teal outline   amber       muted red
```

#### 3. Day Detail Sheet (Bottom Sheet Modal)

When user taps a day in calendar or timeline:

```
┌─────────────────────────────────────────────┐
│                                         ✕   │
│  Monday, February 2                         │
│  COMPLETED                                  │
│                                             │
│  You showed up.                             │
│                                             │
│  ┌─────────────────────────────────────┐   │
│  │ YOUR REFLECTION                      │   │
│  │ Good. Found that I was using about   │   │
│  │ 10,400 yen per day. Quit a sub...    │   │
│  └─────────────────────────────────────┘   │
│                                             │
│  DIFFICULTY  ●●●●○                          │
│                                             │
│  Logged at 20:15                            │
└─────────────────────────────────────────────┘
```

- Slides up from bottom
- Background overlay dismisses on tap
- Shows: date, status (with color), message, reflection, difficulty, time

**Status messages:**
- Done: "You showed up."
- Recovered: "You got back on track."
- Skipped: "You acknowledged the day."
- Missed: "No check-in recorded."

#### 4. Timeline Section (Replaces "Recent Days")

Rename to "Your Week" and show scrollable day cards:

```
YOUR WEEK
┌─────────────────────────────────────────────┐
│  Wed                              RECOVERED │
│  5                                          │
│  Got back on track after yesterday          │
│  at 08:30                                   │
└─────────────────────────────────────────────┘
┌─────────────────────────────────────────────┐
│  Tue                                 MISSED │
│  4                                          │
└─────────────────────────────────────────────┘
┌─────────────────────────────────────────────┐
│  Mon                                   DONE │
│  2                                          │
│  Good. Found that I was using about...      │
│  at 20:15                                   │
└─────────────────────────────────────────────┘
```

- Reverse chronological order
- Cards are tappable → open Day Detail Sheet
- Show note preview (truncated to 60 chars)
- Status badge uses four-state colors

---

## Color Tokens

Use existing design system colors:

```css
/* Status colors */
--status-done: var(--accent-primary);        /* #2D6A5D */
--status-recovered: var(--accent-primary);   /* #2D6A5D, outlined */
--status-skipped: var(--warning);            /* #B5872A */
--status-missed: var(--error);               /* #A65D5D */

/* UI colors */
--selected-day-bg: var(--accent-subtle);     /* #E8F2EF */
--note-indicator: var(--warning);            /* #B5872A */
```

---

## Component Breakdown

```
JourneyScreen
├── NarrativeHeader
│   ├── MomentumRing (SVG)
│   └── InsightText
├── CalendarSection
│   ├── MonthNav
│   ├── DayHeaders
│   ├── CalendarGrid
│   │   └── DayCell (×28-31)
│   └── Legend
├── TimelineSection
│   └── TimelineCard (×n)
├── DayDetailSheet (modal)
└── BottomNav (shared component)
```

---

## Implementation Notes

1. **Remove the CTA entirely** — Don't just hide it. The Today screen is the action surface.

2. **"Showing up" calculation**:
   ```typescript
   const showingUpRate = Math.round(
     ((done + recovered + skipped) / totalDays) * 100
   );
   ```

3. **Insight text logic** — Start simple:
   - Week 1, >70% showing up: "That's better than most Week 1s."
   - Week 1, <70%: "Week 1 is about finding your rhythm."
   - After recovery: "Getting back on track is the hardest part. You did it."

4. **Day Detail Sheet** — Use existing modal/bottom-sheet pattern if you have one. Should slide up with overlay.

5. **Timeline** — Only show days since habit started, not future days.

6. **Calendar navigation** — Keep month nav arrows but don't allow navigating to months before habit start or after current month.

---

## Files to Modify

- `src/components/JourneyScreen.jsx` (or equivalent)
- `src/types/habit.ts` — Add `DayStatus` type, update `DayLog` interface
- `src/utils/habitStats.ts` — Add `calculateShowingUp()` function
- `src/components/DayDetailSheet.jsx` — New component
- `src/components/MomentumRing.jsx` — New component
- `src/components/TimelineCard.jsx` — New component

---

## Reference Implementation

See the attached `journey-screen.jsx` for a complete React implementation with all the visual details. Use it as a reference for:
- Exact color values and styling
- SVG structure for momentum ring
- State management for selected day
- Layout and spacing

---

## Open Questions (Decide Before Implementing)

1. **Should "Skipped" count toward "showing up"?** Current spec says yes — the user engaged mentally. Confirm this is correct.

2. **When exactly does "Recovered" apply?** Current assumption: Any completion that follows a `missed` or `skipped` day. Is that right?

3. **Partial completion** — If someone checks in but doesn't complete the full habit, what state is that? (Might need a fifth state or a modifier.)

4. **Historical data** — How should we handle days logged before this state model existed? Default to `done` or `missed` based on existing boolean?