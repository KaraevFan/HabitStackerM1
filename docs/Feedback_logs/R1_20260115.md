Feedback for Epic 1
- Add in a back button across each step so that the user can go back if they made a mistake.
- It is unclear where the AI consult is actually getting surfaced. Right now, there is a place to take in text input, and we get a loading screen saying that there is going to be AI generation. But then that is not reflected within any of the options available. There is a blurb that says "Suggested options, AI temporarily unavailable." It seems like there's been a decision made to just use hard-coded limits for all of these things, deterministic ones. But the intent of this exercise is to try whether AI is creating meaningful plans. So please do wire in an AI connection everywhere where it's necessary.
- Related to the above, all the options that get surfaced for each one of these step-by-step seem very routine, and things like morning vs. evening selection. The habit system that we're supposed to be designing is supposed to include things like triggers and progression and things of that nature. So, I'm not quite sure why this is happening.
- For your reference, I'm adding in a flow diagram below for how we did this in the CLI version of the tool. Appreciate it if you can refer to it and consider re-architecturing this entire flow.

# HabitStacker — Loops (Phase 1)

Source of truth for the two-layer UX: **Setup Wizard (one-time consult)** and **Runtime Loop (daily/weekly living system)**.  
Phase 1 intent: **reduce cognitive + emotional load** at *Today / Miss / Recovery* while preserving “sense of purpose” (not stochastic tips).

---

## 0) Layering model (Phase 1)

- **Setup Wizard (one-time):** produces a credible Week-1 contract + plan and triggers the **first rep**.
- **Runtime Loop (daily/weekly):** executes the plan with shame-free recovery and minimal decisions.

Design constraints carried over from CLI:
- Consultative (2–3 options; user approves one)
- Never miss twice → miss triggers recovery, not punishment
- No streak framing (“reps / last done / continuity”)
- Progressive disclosure after evidence (3+ reps)
- Time-to-first-rep optimization

---

## 1) Setup Wizard Loop (One-time consult)

### 1.1 Screens (compressed)

**Screen 1 — Intent + Problem Framing**
- Ask: goal + constraints (+ optional context)
- Provide: trust framing / tone; normalize difficulty

**Screen 2 — Orientation / Success Map (read-only)**
- Provide: 2–4 phase roadmap of “what good looks like”
- Auto-confirm (no choice)

**Screen 3 — Define Success This Week**
- Ask: choose 1 of 2–3 outcomes (or custom)
- Provide: “why this works” per option (purpose)

**Screen 4 — Planning (lightly combined)**
- Ask: anchor (for recurring) + accept/lightly edit proposed plan
- Provide: Action (≤2m), Prime (≤30s), Recovery (≤30s if recurring)

**Screen 5 — Snapshot + Immediate Action**
- Provide: 2-line Week-1 plan + “why it works”
- CTA: Start first rep now (2m)

---

### 1.2 Diagram A — Setup Wizard Flow (screens + branching)

```mermaid
flowchart TD
  %% SETUP WIZARD (ONE-TIME CONSULT)
  %% Goal: produce a credible Week-1 plan + trigger first rep immediately

  A[Entry\nUser starts consult] --> B[Intent + Problem Framing\nAsk: goal + constraints + optional context\nProvide: trust framing + tone]
  B --> C[Orientation / Success Map\nProvide: 2-4 phases of "good looks like"\nAuto-confirm (no choice)]
  C --> D[Define Success This Week\nAsk: pick 1 of 2-3 outcomes\nProvide: why each option works]
  D --> E{{Classification (internal)\nSETUP vs RECURRING vs MIXED}}

  %% RECURRING PATH
  E -->|RECURRING| R1[Anchor\nAsk: after what existing routine?]
  R1 --> R2[Planning\nProvide proposed Action (≤2m) + Prime (≤30s) + Recovery (≤30s)\nAsk: accept or lightly edit]
  R2 --> S[Snapshot + Immediate Action\nShow 2-line plan + short "why"\nCTA: Start first rep now]

  %% SETUP PATH
  E -->|SETUP| U1[Planning\nProvide proposed Action (≤2m) + Prime (≤30s)\nAsk: accept or lightly edit]
  U1 --> S

  %% MIXED PATH
  E -->|MIXED| M1[Setup Component\nProvide Action (≤2m) + Prime (≤30s)]
  M1 --> M2[Recurring Component\nAsk: Anchor\nProvide Recovery plan]
  M2 --> S

  %% EXIT INTO RUNTIME
  S --> T[Handoff to Runtime Loop\nIntent screen seeded with Week-1 contract]
